"use strict";(self.webpackChunk_open_sauced_insights=self.webpackChunk_open_sauced_insights||[]).push([[7428],{"./components/atoms/Fab/fab.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var clsx__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/clsx/dist/clsx.m.js"),__jsx=__webpack_require__("./node_modules/react/index.js").createElement,Fab=function Fab(_ref){var position=_ref.position,children=_ref.children,className=_ref.className;return __jsx("button",{type:"button",className:(0,clsx__WEBPACK_IMPORTED_MODULE_1__.Z)("fixed",function getFabPositionStyles(){switch(position){case"top-left":return"top-4 left-4";case"top-right":return"top-4 right-4";case"bottom-left":return"bottom-4 left-4";case"bottom-right":return"bottom-4 right-4";default:return"bottom-8 right-8"}}(),className)},children)};Fab.displayName="Fab",Fab.__docgenInfo={description:"",methods:[],displayName:"Fab",props:{position:{required:!1,tsType:{name:"union",raw:'"top-left" | "top-right" | "bottom-left" | "bottom-right"',elements:[{name:"literal",value:'"top-left"'},{name:"literal",value:'"top-right"'},{name:"literal",value:'"bottom-left"'},{name:"literal",value:'"bottom-right"'}]},description:""},onClick:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}},__webpack_exports__.Z=Fab;try{fab.displayName="fab",fab.__docgenInfo={description:"",displayName:"fab",props:{position:{defaultValue:null,description:"",name:"position",required:!1,type:{name:"enum",value:[{value:'"top-left"'},{value:'"top-right"'},{value:'"bottom-left"'},{value:'"bottom-right"'}]}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(() => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["components/atoms/Fab/fab.tsx#fab"]={docgenInfo:fab.__docgenInfo,name:"fab",path:"components/atoms/Fab/fab.tsx#fab"})}catch(__react_docgen_typescript_loader_error){}},"./components/atoms/TextInput/text-input.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _home_runner_work_app_app_node_modules_babel_runtime_helpers_esm_extends_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),_home_runner_work_app_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),_primer_octicons_react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@primer/octicons-react/dist/index.esm.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),clsx__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/clsx/dist/clsx.m.js"),_excluded=["name","label","placeholder","state","id","value","descriptionText","className","fieldRef","disabled","borderless","handleChange","errorMsg"],__jsx=react__WEBPACK_IMPORTED_MODULE_0__.createElement,TextInput=function TextInput(_ref){var name=_ref.name,label=_ref.label,placeholder=_ref.placeholder,_ref$state=_ref.state,state=void 0===_ref$state?"default":_ref$state,id=_ref.id,value=_ref.value,descriptionText=_ref.descriptionText,className=_ref.className,fieldRef=_ref.fieldRef,_ref$disabled=_ref.disabled,disabled=void 0!==_ref$disabled&&_ref$disabled,_ref$borderless=_ref.borderless,borderless=void 0!==_ref$borderless&&_ref$borderless,handleChange=_ref.handleChange,_ref$errorMsg=_ref.errorMsg,errorMsg=void 0===_ref$errorMsg?"":_ref$errorMsg,props=(0,_home_runner_work_app_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_1__.Z)(_ref,_excluded),inputRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);return __jsx(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,__jsx("label",{className:"flex flex-col w-full"},label&&__jsx("p",{className:"mb-2 text-sm text-light-slate-9"},label),__jsx("div",{className:(0,clsx__WEBPACK_IMPORTED_MODULE_2__.Z)("flex-1 px-3 text-light-slate-12 bg-white shadow-input border transition rounded-lg py-1 flex items-center",borderless&&"!border-none","invalid"===state?"focus-within:border-light-red-10":"focus-within:border-light-orange-9 ",disabled&&"bg-light-slate-3 text-light-slate-6",className)},__jsx("input",(0,_home_runner_work_app_app_node_modules_babel_runtime_helpers_esm_extends_js__WEBPACK_IMPORTED_MODULE_3__.Z)({ref:fieldRef||inputRef,type:"text",name:name,id:id||name||"",placeholder:placeholder||"",className:(0,clsx__WEBPACK_IMPORTED_MODULE_2__.Z)("flex-1 focus:outline-none",disabled&&"bg-light-slate-3 cursor-not-allowed text-light-slate-9",className),disabled:disabled,value:value,onChange:function handleChangeState(event){null==handleChange||handleChange(event.target.value)}},props)),!disabled&&__jsx(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,"valid"===state?__jsx(_primer_octicons_react__WEBPACK_IMPORTED_MODULE_4__.kD1,{className:"ml-1 text-light-orange-9",size:12}):value?__jsx("span",{title:"Clear input",className:"flex items-center ml-1",onClick:function handleResetInput(){null==handleChange||handleChange(""),fieldRef&&(fieldRef.current.value="")}},__jsx(_primer_octicons_react__WEBPACK_IMPORTED_MODULE_4__.S7k,{className:(0,clsx__WEBPACK_IMPORTED_MODULE_2__.Z)("invalid"===state&&errorMsg?"text-light-red-11":"text-light-slate-8","cursor-pointer"),size:12})):""))),descriptionText?__jsx("p",{className:"mt-2 text-sm text-light-slate-9"},descriptionText):"","invalid"===state&&errorMsg?__jsx("p",{className:"mt-3 text-sm text-light-red-11 "},errorMsg):"")};TextInput.__docgenInfo={description:"",methods:[],displayName:"TextInput",props:{state:{defaultValue:{value:'"default"',computed:!1},required:!1,tsType:{name:"union",raw:'"default" | "valid" | "invalid"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"valid"'},{name:"literal",value:'"invalid"'}]},description:""},disabled:{defaultValue:{value:"false",computed:!1},required:!1},borderless:{defaultValue:{value:"false",computed:!1},required:!1,tsType:{name:"boolean"},description:""},errorMsg:{defaultValue:{value:'""',computed:!1},required:!1,tsType:{name:"string"},description:""},label:{required:!1,tsType:{name:"string"},description:""},descriptionText:{required:!1,tsType:{name:"string"},description:""},fieldRef:{required:!1,tsType:{name:"ReactRefObject",raw:"React.RefObject<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]},description:""},handleChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{name:"value",type:{name:"string"}}],return:{name:"void"}}},description:""}}},__webpack_exports__.Z=TextInput;try{textinput.displayName="textinput",textinput.__docgenInfo={description:"",displayName:"textinput",props:{label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},state:{defaultValue:{value:"default"},description:"",name:"state",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"valid"'},{value:'"invalid"'}]}},borderless:{defaultValue:{value:"false"},description:"",name:"borderless",required:!1,type:{name:"boolean"}},descriptionText:{defaultValue:null,description:"",name:"descriptionText",required:!1,type:{name:"string"}},errorMsg:{defaultValue:{value:""},description:"",name:"errorMsg",required:!1,type:{name:"string"}},fieldRef:{defaultValue:null,description:"",name:"fieldRef",required:!1,type:{name:"RefObject<HTMLInputElement>"}},handleChange:{defaultValue:null,description:"",name:"handleChange",required:!1,type:{name:"((value: string) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["components/atoms/TextInput/text-input.tsx#textinput"]={docgenInfo:textinput.__docgenInfo,name:"textinput",path:"components/atoms/TextInput/text-input.tsx#textinput"})}catch(__react_docgen_typescript_loader_error){}},"./components/molecules/HighlightInput/highlight-input-form.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return highlight_input_form}});var slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),asyncToGenerator=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),toConsumableArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),react=__webpack_require__("./node_modules/react/index.js"),regenerator=__webpack_require__("./node_modules/@babel/runtime/regenerator/index.js"),regenerator_default=__webpack_require__.n(regenerator),index_esm=__webpack_require__("./node_modules/react-icons/fi/index.esm.js"),format=__webpack_require__("./node_modules/date-fns/esm/format/index.js"),hi_index_esm=__webpack_require__("./node_modules/react-icons/hi/index.esm.js"),rx_index_esm=__webpack_require__("./node_modules/react-icons/rx/index.esm.js"),io5_index_esm=__webpack_require__("./node_modules/react-icons/io5/index.esm.js"),bs_index_esm=__webpack_require__("./node_modules/react-icons/bs/index.esm.js"),useDebounce=__webpack_require__("./node_modules/rooks/dist/esm/hooks/useDebounce.js"),Button_button=__webpack_require__("./components/atoms/Button/button.tsx"),tooltip=__webpack_require__("./components/atoms/Tooltip/tooltip.tsx"),change_capitalization=function changeCapitalization(string,isMakeUppercase){var tempString=string.slice(0);return isMakeUppercase?tempString.charAt(0).toUpperCase()+tempString.slice(1):tempString.charAt(0).toLowerCase()+tempString.slice(1)},supabase=__webpack_require__("./lib/utils/supabase.ts");function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,defineProperty.Z)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var createHighlights=function(){var _ref=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee(data){var _sessionResponse$data,sessionResponse,sessionToken,response;return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,supabase.O.auth.getSession();case 2:return sessionResponse=_context.sent,sessionToken=null==sessionResponse||null===(_sessionResponse$data=sessionResponse.data.session)||void 0===_sessionResponse$data?void 0:_sessionResponse$data.access_token,_context.prev=4,_context.next=7,fetch("".concat("https://beta.api.opensauced.pizza/v1","/user/highlights"),{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(sessionToken)},method:"POST",body:JSON.stringify(_objectSpread({},data))});case 7:if((response=_context.sent).ok){_context.next=10;break}throw response;case 10:return _context.abrupt("return",response.json());case 13:return _context.prev=13,_context.t0=_context.catch(4),_context.abrupt("return",_context.t0.json().then((function(err){return err instanceof Error?change_capitalization(err.message,!0):change_capitalization(err.message[0],!0)})));case 16:case"end":return _context.stop()}}),_callee,null,[[4,13]])})));return function createHighlights(_x){return _ref.apply(this,arguments)}}(),github=__webpack_require__("./lib/utils/github.ts"),fetchGithubPRInfo=__webpack_require__("./lib/hooks/fetchGithubPRInfo.ts"),useToast=__webpack_require__("./lib/hooks/useToast.ts"),text_input=__webpack_require__("./components/atoms/TextInput/text-input.tsx"),console=__webpack_require__("./node_modules/console-browserify/index.js"),generatePrHighlightSummaryByCommitMsg=function(){var _ref=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee(commitMessages){var _sessionResponse$data,sessionResponse,sessionToken,payload,res,data;return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,supabase.O.auth.getSession();case 2:return sessionResponse=_context.sent,sessionToken=null==sessionResponse||null===(_sessionResponse$data=sessionResponse.data.session)||void 0===_sessionResponse$data?void 0:_sessionResponse$data.access_token,payload={descriptionLength:400,commitMessages:commitMessages,language:"english",diff:"commitMessage",tone:"formal",temperature:7},_context.prev=5,_context.next=8,fetch("".concat("https://beta.api.opensauced.pizza/v1","/prs/description/generate"),{method:"POST",headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(sessionToken)},body:JSON.stringify(payload)});case 8:if(!(res=_context.sent).ok){_context.next=16;break}return _context.next=12,res.json();case 12:return data=_context.sent,_context.abrupt("return",data.description);case 16:return _context.abrupt("return",null);case 17:_context.next=23;break;case 19:return _context.prev=19,_context.t0=_context.catch(5),console.log(_context.t0),_context.abrupt("return",null);case 23:case"end":return _context.stop()}}),_callee,null,[[5,19]])})));return function generatePrHighlightSummaryByCommitMsg(_x){return _ref.apply(this,arguments)}}(),fab=__webpack_require__("./components/atoms/Fab/fab.tsx"),esm_extends=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),objectWithoutProperties=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),clsx_m=__webpack_require__("./node_modules/clsx/dist/clsx.m.js"),_excluded=["className","onChangeText","typewrite","textContent","defaultRow"],__jsx=react.createElement,TypeWriterTextArea=react.forwardRef((function(_ref){var className=_ref.className,onChangeText=_ref.onChangeText,typewrite=_ref.typewrite,textContent=_ref.textContent,defaultRow=_ref.defaultRow,props=(0,objectWithoutProperties.Z)(_ref,_excluded),textareaRef=(0,react.useRef)(null);(0,react.useEffect)((function(){typewrite&&textContent&&function typeWrite(text){var textarea=textareaRef.current;if(textarea){textarea.focus(),textarea.value="",textarea.selectionStart=textarea.selectionEnd=textarea.value.length;var interval=setInterval((function(){textarea.value.length===text.length?clearInterval(interval):textarea.value=text.slice(0,textarea.value.length+1)}),10)}}(textContent)}),[typewrite,textContent]);return __jsx("textarea",(0,esm_extends.Z)({onChange:function handleInputChange(event){null==onChangeText||onChangeText(event.target.value),function autoGrowTextarea(){var textarea=textareaRef.current;textarea&&(textarea.style.height="auto",textarea.style.height="".concat(textarea.scrollHeight,"px"))}()},className:(0,clsx_m.Z)("flex h-20 md:min-h-26 md:h-auto w-full rounded-md  py-2  text-sm placeholder:text-slate-400 disabled:cursor-not-allowed disabled:opacity-50",className),rows:defaultRow,ref:textareaRef},props))}));TypeWriterTextArea.displayName="TypeWriterTextArea",TypeWriterTextArea.__docgenInfo={description:"",methods:[],displayName:"TypeWriterTextArea"};try{TypeWriterTextArea.displayName="TypeWriterTextArea",TypeWriterTextArea.__docgenInfo={description:"",displayName:"TypeWriterTextArea",props:{onChangeText:{defaultValue:null,description:"",name:"onChangeText",required:!1,type:{name:"((value: string) => void)"}},typewrite:{defaultValue:null,description:"",name:"typewrite",required:!1,type:{name:"boolean"}},textContent:{defaultValue:null,description:"",name:"textContent",required:!1,type:{name:"string"}},defaultRow:{defaultValue:null,description:"",name:"defaultRow",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["components/atoms/TypeWriterTextArea/type-writer-text-area.tsx#TypeWriterTextArea"]={docgenInfo:TypeWriterTextArea.__docgenInfo,name:"TypeWriterTextArea",path:"components/atoms/TypeWriterTextArea/type-writer-text-area.tsx#TypeWriterTextArea"})}catch(__react_docgen_typescript_loader_error){}var fetchGithubIssueInfo=__webpack_require__("./lib/hooks/fetchGithubIssueInfo.ts"),generate_issue_highlight_summary_console=__webpack_require__("./node_modules/console-browserify/index.js"),generateIssueHighlightSummary=function(){var _ref=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee(issueTitle,issueBody,issueComments){var _sessionResponse$data,sessionResponse,sessionToken,payload,res,data;return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,supabase.O.auth.getSession();case 2:return sessionResponse=_context.sent,sessionToken=null==sessionResponse||null===(_sessionResponse$data=sessionResponse.data.session)||void 0===_sessionResponse$data?void 0:_sessionResponse$data.access_token,payload={summaryLength:400,issueTitle:issueTitle,issueDescription:issueBody,issueComments:issueComments,language:"english",diff:"issue",tone:"formal",temperature:7},_context.prev=5,_context.next=8,fetch("".concat("https://beta.api.opensauced.pizza/v1","/issues/summary/generate"),{method:"POST",headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(sessionToken)},body:JSON.stringify(payload)});case 8:if(!(res=_context.sent).ok){_context.next=16;break}return _context.next=12,res.json();case 12:return data=_context.sent,_context.abrupt("return",data.summary);case 16:return _context.abrupt("return",null);case 17:_context.next=23;break;case 19:return _context.prev=19,_context.t0=_context.catch(5),generate_issue_highlight_summary_console.log(_context.t0),_context.abrupt("return",null);case 23:case"end":return _context.stop()}}),_callee,null,[[5,19]])})));return function generateIssueHighlightSummary(_x,_x2,_x3){return _ref.apply(this,arguments)}}(),generate_issue_highlight_summary=generateIssueHighlightSummary,fetchDevToBlogInfo=__webpack_require__("./lib/hooks/fetchDevToBlogInfo.ts"),dev_to=__webpack_require__("./lib/utils/dev-to.ts"),generate_blog_highlight_summary_console=__webpack_require__("./node_modules/console-browserify/index.js"),generateBlogHighlightSummary=function(){var _ref=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee(blogTitle,blogMarkdown){var _sessionResponse$data,sessionResponse,sessionToken,payload,res,data;return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,supabase.O.auth.getSession();case 2:return sessionResponse=_context.sent,sessionToken=null==sessionResponse||null===(_sessionResponse$data=sessionResponse.data.session)||void 0===_sessionResponse$data?void 0:_sessionResponse$data.access_token,payload={summaryLength:400,blogTitle:blogTitle,blogMarkdown:blogMarkdown,language:"english",diff:"issue",tone:"formal",temperature:7},_context.prev=5,_context.next=8,fetch("".concat("https://beta.api.opensauced.pizza/v1","/blogs/summary/generate"),{method:"POST",headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(sessionToken)},body:JSON.stringify(payload)});case 8:if(!(res=_context.sent).ok){_context.next=16;break}return _context.next=12,res.json();case 12:return data=_context.sent,_context.abrupt("return",data.summary);case 16:return _context.abrupt("return",null);case 17:_context.next=23;break;case 19:return _context.prev=19,_context.t0=_context.catch(5),generate_blog_highlight_summary_console.log(_context.t0),_context.abrupt("return",null);case 23:case"end":return _context.stop()}}),_callee,null,[[5,19]])})));return function generateBlogHighlightSummary(_x,_x2){return _ref.apply(this,arguments)}}(),generate_blog_highlight_summary=generateBlogHighlightSummary,search=__webpack_require__("./components/atoms/Search/search.tsx"),useSupabaseAuth=__webpack_require__("./lib/hooks/useSupabaseAuth.ts"),calendar=__webpack_require__("./components/molecules/Calendar/calendar.tsx"),index_module=__webpack_require__("./node_modules/@radix-ui/react-collapsible/dist/index.module.js"),Collapsible=index_module.fC,CollapsibleTrigger=index_module.wy,CollapsibleContent=index_module.Fw;try{Collapsible.displayName="Collapsible",Collapsible.__docgenInfo={description:"",displayName:"Collapsible",props:{asChild:{defaultValue:null,description:"",name:"asChild",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["components/molecules/Collapsible/collapsible.tsx#Collapsible"]={docgenInfo:Collapsible.__docgenInfo,name:"Collapsible",path:"components/molecules/Collapsible/collapsible.tsx#Collapsible"})}catch(__react_docgen_typescript_loader_error){}try{CollapsibleTrigger.displayName="CollapsibleTrigger",CollapsibleTrigger.__docgenInfo={description:"",displayName:"CollapsibleTrigger",props:{asChild:{defaultValue:null,description:"",name:"asChild",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["components/molecules/Collapsible/collapsible.tsx#CollapsibleTrigger"]={docgenInfo:CollapsibleTrigger.__docgenInfo,name:"CollapsibleTrigger",path:"components/molecules/Collapsible/collapsible.tsx#CollapsibleTrigger"})}catch(__react_docgen_typescript_loader_error){}try{CollapsibleContent.displayName="CollapsibleContent",CollapsibleContent.__docgenInfo={description:"",displayName:"CollapsibleContent",props:{asChild:{defaultValue:null,description:"",name:"asChild",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["components/molecules/Collapsible/collapsible.tsx#CollapsibleContent"]={docgenInfo:CollapsibleContent.__docgenInfo,name:"CollapsibleContent",path:"components/molecules/Collapsible/collapsible.tsx#CollapsibleContent"})}catch(__react_docgen_typescript_loader_error){}var popover=__webpack_require__("./components/molecules/Popover/popover.tsx"),gh_open_graph_img=__webpack_require__("./components/molecules/GhOpenGraphImg/gh-open-graph-img.tsx"),dev_to_social_img=__webpack_require__("./components/molecules/DevToSocialImage/dev-to-social-img.tsx"),card_repo_list=__webpack_require__("./components/molecules/CardRepoList/card-repo-list.tsx"),dialog=__webpack_require__("./components/molecules/Dialog/dialog.tsx"),highlight_input_form_jsx=react.createElement;function highlight_input_form_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function highlight_input_form_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?highlight_input_form_ownKeys(Object(source),!0).forEach((function(key){(0,defineProperty.Z)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):highlight_input_form_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var HighlightInputForm=function HighlightInputForm(_ref){var refreshCallback=_ref.refreshCallback,providerToken=(0,useSupabaseAuth.Z)().providerToken,_useState=(0,react.useState)(!1),isDivFocused=_useState[0],setIsDivFocused=_useState[1],_useState2=(0,react.useState)(!1),isSummaryButtonDisabled=_useState2[0],setIsSummaryButtonDisabled=_useState2[1],_useState3=(0,react.useState)(!1),isFormOpenMobile=_useState3[0],setIsFormOpenMobile=_useState3[1],_useState4=(0,react.useState)(!1),addTaggedRepoFormOpen=_useState4[0],setAddTaggedRepoFormOpen=_useState4[1],_useState5=(0,react.useState)(!1),loading=_useState5[0],setLoading=_useState5[1],_useState6=(0,react.useState)(!1),isTyping=_useState6[0],setIsTyping=_useState6[1],_useState7=(0,react.useState)(""),bodyText=_useState7[0],setBodyText=_useState7[1],_useState8=(0,react.useState)(""),title=_useState8[0],setTitle=_useState8[1],_useState9=(0,react.useState)(0),charCount=_useState9[0],setCharCount=_useState9[1],_useState10=(0,react.useState)(""),highlightLink=_useState10[0],setHighlightLink=_useState10[1],textAreaRef=(0,react.useRef)(null),_useState11=(0,react.useState)([]),taggedRepoList=_useState11[0],setTaggedRepoList=_useState11[1],_useState12=(0,react.useState)(""),taggedRepoSearchTerm=_useState12[0],setTaggedRepoSearchTerm=_useState12[1],_useState13=(0,react.useState)([]),repoTagSuggestions=_useState13[0],setRepoTagSuggestions=_useState13[1],_useState14=(0,react.useState)(!1),tagRepoSearchLoading=_useState14[0],setTagRepoSearchLoading=_useState14[1],_useState15=(0,react.useState)(),date=_useState15[0],setDate=_useState15[1],toast=(0,useToast.pm)().toast,validCharLimit=function validCharLimit(){return charCount-highlightLink.length<=500},handleTextAreaInputChange=function handleTextAreaInputChange(value){setBodyText(value)};(0,react.useEffect)((function(){document.body.style.overflow=isFormOpenMobile?"hidden":"auto"}),[isFormOpenMobile]),(0,react.useEffect)((function(){if(highlightLink&&((0,github.qm)(highlightLink)||(0,github.o8)(highlightLink))){var apiPaths=(0,github.ny)(highlightLink).apiPaths,repoName=apiPaths.repoName,orgName=apiPaths.orgName,repoIcon=(apiPaths.issueId,(0,github.cc)(orgName,60));if(taggedRepoList.some((function(repo){return repo.repoName===repoName})))return;var newRepo={repoName:repoName,repoOwner:orgName,repoIcon:repoIcon},newTaggedRepoList=[].concat((0,toConsumableArray.Z)(taggedRepoList),[newRepo]);setTaggedRepoList(newTaggedRepoList)}}),[highlightLink]);var handleTaggedRepoAdd=function(){var _ref2=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee(repoFullName){var _repoFullName$split,_repoFullName$split2,ownerName,repoName,repoIcon,newTaggedRepoList;return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!(taggedRepoList.length>=3)){_context.next=3;break}return toast({description:"You can only tag up to 3 repos!",title:"Error",variant:"danger"}),_context.abrupt("return");case 3:if(!taggedRepoList.some((function(repo){return"".concat(repo.repoOwner,"/").concat(repo.repoName)===repoFullName}))){_context.next=6;break}return toast({description:"Repo already tagged!",title:"Error",variant:"danger"}),_context.abrupt("return");case 6:return _context.next=8,fetch("https://api.github.com/repos/".concat(repoFullName),highlight_input_form_objectSpread({},providerToken?{headers:{Authorization:"Bearer ".concat(providerToken)}}:{}));case 8:if(_context.sent.ok){_context.next=12;break}return toast({description:"Repo not found!",title:"Error",variant:"danger"}),_context.abrupt("return");case 12:_repoFullName$split=repoFullName.split("/"),_repoFullName$split2=(0,slicedToArray.Z)(_repoFullName$split,2),ownerName=_repoFullName$split2[0],repoName=_repoFullName$split2[1],repoIcon=(0,github.cc)(ownerName,60),newTaggedRepoList=[].concat((0,toConsumableArray.Z)(taggedRepoList),[{repoName:repoName,repoOwner:ownerName,repoIcon:repoIcon}]),setTaggedRepoList(newTaggedRepoList),toast({description:"Repo tag added!",title:"Success",variant:"success"});case 17:case"end":return _context.stop()}}),_callee)})));return function handleTaggedRepoAdd(_x){return _ref2.apply(this,arguments)}}(),handleGenerateHighlightSummary=function(){var _ref3=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee2(){var summary,commitMessages,_yield$getGithubIssue,issueTitle,issueBody,issueComments,_yield$getBlogDetails,blogTitle,blogMarkdown;return regenerator_default().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(highlightLink&&((0,github.qm)(highlightLink)||(0,github.o8)(highlightLink)||(0,dev_to.u)(highlightLink))){_context2.next=3;break}return toast({description:"Please provide a valid pull request, issue or dev.to blog link!",title:"Error",variant:"danger"}),_context2.abrupt("return");case 3:if(setIsSummaryButtonDisabled(!0),!(0,github.qm)(highlightLink)){_context2.next=13;break}return _context2.next=7,(0,github.VV)(highlightLink);case 7:return commitMessages=_context2.sent,_context2.next=10,generatePrHighlightSummaryByCommitMsg(commitMessages);case 10:summary=_context2.sent,_context2.next=35;break;case 13:if(!(0,github.o8)(highlightLink)){_context2.next=27;break}return _context2.next=16,(0,github.ih)(highlightLink);case 16:return _yield$getGithubIssue=_context2.sent,issueTitle=_yield$getGithubIssue.title,issueBody=_yield$getGithubIssue.body,_context2.next=21,(0,github.dL)(highlightLink);case 21:return issueComments=_context2.sent,_context2.next=24,generate_issue_highlight_summary(issueTitle,issueBody,issueComments);case 24:summary=_context2.sent,_context2.next=35;break;case 27:return _context2.next=29,(0,dev_to.G)(highlightLink);case 29:return _yield$getBlogDetails=_context2.sent,blogTitle=_yield$getBlogDetails.title,blogMarkdown=_yield$getBlogDetails.markdown,_context2.next=34,generate_blog_highlight_summary(blogTitle,blogMarkdown);case 34:summary=_context2.sent;case 35:setIsSummaryButtonDisabled(!1),summary?(setBodyText(summary),setIsTyping(!0),setTimeout((function(){setIsTyping(!1)}),1e3),setCharCount(summary.length)):toast({description:"An error occured!",title:"Error",variant:"danger"});case 37:case"end":return _context2.stop()}}),_callee2)})));return function handleGenerateHighlightSummary(){return _ref3.apply(this,arguments)}}(),handlePostHighlight=function(){var _ref4=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee3(e){var highlight,highlightType,res,_generateRepoParts2,apiPaths,repoName,orgName,issueId,taggedRepoFullNames,_res;return regenerator_default().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(e.preventDefault(),highlight=bodyText,!((0,github.qm)(highlightLink)||(0,github.o8)(highlightLink)||(0,dev_to.u)(highlightLink))){_context3.next=48;break}if(highlightType=(0,github.o8)(highlightLink)?"issue":(0,github.qm)(highlightLink)?"pull_request":"blog_post",res={},"pull_request"!==highlightType&&"issue"!==highlightType){_context3.next=21;break}if(_generateRepoParts2=(0,github.ny)(highlightLink),apiPaths=_generateRepoParts2.apiPaths,repoName=apiPaths.repoName,orgName=apiPaths.orgName,issueId=apiPaths.issueId,setLoading(!0),"issue"!==highlightType){_context3.next=15;break}return _context3.next=12,(0,fetchGithubIssueInfo.x)(orgName,repoName,issueId);case 12:_context3.t0=_context3.sent,_context3.next=18;break;case 15:return _context3.next=17,(0,fetchGithubPRInfo.U)(orgName,repoName,issueId);case 17:_context3.t0=_context3.sent;case 18:res=_context3.t0,_context3.next=24;break;case 21:return _context3.next=23,(0,fetchDevToBlogInfo.s)(highlightLink);case 23:res=_context3.sent;case 24:if(taggedRepoFullNames=taggedRepoList.map((function(repo){return"".concat(repo.repoOwner,"/").concat(repo.repoName)})),!res.isError){_context3.next=31;break}return setLoading(!1),toast({description:"A valid Pull request, Issue or dev.to Blog Link is required",variant:"danger"}),_context3.abrupt("return");case 31:return setLoading(!0),_context3.next=34,createHighlights({highlight:highlight,title:title,url:highlightLink,shipped_at:date,type:highlightType,taggedRepos:taggedRepoFullNames});case 34:if(_res=_context3.sent,setLoading(!1),"string"!=typeof _res){_context3.next=38;break}return _context3.abrupt("return",toast({description:_res,title:"Error",variant:"danger"}));case 38:refreshCallback&&refreshCallback(),setBodyText(""),setHighlightLink(""),setTitle(""),setDate(void 0),setIsDivFocused(!1),setIsFormOpenMobile(!1),toast({description:"Highlight Posted!",title:"Success",variant:"success"});case 46:_context3.next=49;break;case 48:toast({description:"Please provide a valid pull request, issue or dev.to blog link!",title:"Error",variant:"danger"});case 49:case"end":return _context3.stop()}}),_callee3)})));return function handlePostHighlight(_x2){return _ref4.apply(this,arguments)}}(),updateSuggestionsDebounced=(0,useDebounce.N)((0,asyncToGenerator.Z)(regenerator_default().mark((function _callee4(){var req,res,suggestions;return regenerator_default().wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return setTagRepoSearchLoading(!0),_context4.next=3,fetch("https://api.github.com/search/repositories?q=".concat(encodeURIComponent("".concat(taggedRepoSearchTerm," in:name in:repo:owner/name sort:updated"))),highlight_input_form_objectSpread({},providerToken?{headers:{Authorization:"Bearer ".concat(providerToken)}}:{}));case 3:if(req=_context4.sent,setTagRepoSearchLoading(!1),!req.ok){_context4.next=11;break}return _context4.next=8,req.json();case 8:res=_context4.sent,suggestions=res.items.map((function(item){return item.full_name})),setRepoTagSuggestions(suggestions);case 11:case"end":return _context4.stop()}}),_callee4)}))),250);return(0,react.useEffect)((function(){setRepoTagSuggestions([]),taggedRepoSearchTerm&&updateSuggestionsDebounced()}),[taggedRepoSearchTerm]),highlight_input_form_jsx("form",{onSubmit:handlePostHighlight,className:"flex flex-col flex-1 gap-4 "},highlight_input_form_jsx(Collapsible,{className:"max-sm:hidden",onOpenChange:function handleCollapsibleOpenChange(){setIsDivFocused(!(isDivFocused&&!charCount&&!highlightLink))},open:isDivFocused},highlight_input_form_jsx("div",{className:"flex flex-col gap-2 p-2 overflow-hidden text-sm bg-white border rounded-lg"},highlight_input_form_jsx(CollapsibleTrigger,{asChild:!0},highlight_input_form_jsx("div",{className:"flex pr-2"},highlight_input_form_jsx("input",{value:title,maxLength:50,onChange:function onChange(e){return setTitle(e.target.value)},className:"flex-1 font-normal placeholder:text-sm focus:outline-none",type:"text",placeholder:isDivFocused?"Add title (optional)":"Post a highlight to show your work!",id:"highlight-create-input"}))),highlight_input_form_jsx(CollapsibleContent,null,highlight_input_form_jsx(TypeWriterTextArea,{className:"resize-y min-h-[80px] max-h-99 font-normal text-light-slate-11 mb-2 transition focus:outline-none rounded-lg ".concat(isDivFocused?"":"hidden"),defaultRow:4,value:bodyText,placeholder:" Tell us about your highlight and add a link\n              ",typewrite:isTyping,textContent:bodyText,onChangeText:function onChangeText(value){handleTextAreaInputChange(value),setCharCount(value.length)},ref:textAreaRef}),highlight_input_form_jsx("p",{className:"flex justify-end gap-1 pb-2 text-xs text-light-slate-9"},highlight_input_form_jsx("span",{className:"".concat(!validCharLimit()&&"text-red-600")},validCharLimit()?charCount:"-".concat(charCount-500)),"/ ",highlight_input_form_jsx("span",null,500)),highlight_input_form_jsx("div",{className:"flex items-center justify-between w-full gap-1 p-1 text-sm bg-white border rounded-lg mb-4"},highlight_input_form_jsx("div",{className:"flex w-full gap-1"},highlight_input_form_jsx(card_repo_list.Z,{repoList:taggedRepoList,deletable:!0,onDelete:function onDelete(repoName){return function handleTaggedRepoDelete(repoName){var newTaggedRepoList=taggedRepoList.filter((function(repo){return repo.repoName!==repoName}));setTaggedRepoList(newTaggedRepoList)}(repoName)}}),highlight_input_form_jsx(tooltip.Z,{content:"Add a repo"},highlight_input_form_jsx("button",{className:"flex gap-1  p-1 pr-2 border-[1px] border-light-slate-6 rounded-lg text-light-slate-12 items-center cursor-pointer",onClick:function onClick(e){e.preventDefault(),setAddTaggedRepoFormOpen(!0)}},highlight_input_form_jsx(bs_index_esm.ra4,{className:"rounded-[4px] overflow-hidden"}),highlight_input_form_jsx("span",{className:"max-w-[45px] md:max-w-[100px] truncate"},"Add a repo"))))),highlight_input_form_jsx("div",{className:"flex"},highlight_input_form_jsx("div",{className:"flex w-full gap-1"},highlight_input_form_jsx(tooltip.Z,{direction:"top",content:"Pick a date"},highlight_input_form_jsx(popover.J2,null,highlight_input_form_jsx(popover.xo,{asChild:!0},highlight_input_form_jsx("button",{className:"flex items-center gap-2 p-2 text-base rounded-full text-light-slate-9 bg-light-slate-3"},highlight_input_form_jsx(index_esm.vlc,{className:"text-light-slate-11"}),date&&highlight_input_form_jsx("span",{className:"text-xs"},(0,format.Z)(date,"PPP")))),highlight_input_form_jsx(popover.yk,{className:"w-auto p-0 bg-white"},highlight_input_form_jsx(calendar.f,{toDate:new Date,mode:"single",selected:date,onSelect:setDate,className:"border rounded-md"})))),highlight_input_form_jsx(tooltip.Z,{className:"text-xs",direction:"top",content:"Auto-Summarize"},highlight_input_form_jsx("button",{disabled:isSummaryButtonDisabled,type:"button",onClick:handleGenerateHighlightSummary,className:"p-2 rounded-full bg-light-slate-3 text-light-slate-11 disabled:cursor-not-allowed disabled:animate-pulse disabled:text-light-orange-9"},highlight_input_form_jsx(hi_index_esm.Moc,{className:"text-base"}))),highlight_input_form_jsx(text_input.Z,{className:"text-xs",value:highlightLink,handleChange:function handleChange(value){return setHighlightLink(value)},placeholder:"Paste the URL to your Pull Request or Issue."})))))),highlightLink&&isDivFocused&&highlightLink.includes("github")&&highlight_input_form_jsx(gh_open_graph_img.Z,{className:"max-sm:hidden",githubLink:highlightLink}),highlightLink&&isDivFocused&&highlightLink.includes("dev.to")&&highlight_input_form_jsx(dev_to_social_img.Z,{className:"max-sm:hidden",blogLink:highlightLink}),isDivFocused&&highlight_input_form_jsx(Button_button.Z,{loading:loading,disabled:!bodyText||!validCharLimit(),className:"ml-auto max-sm:hidden ",variant:"primary"},"Post"),highlight_input_form_jsx(dialog.Vq,{open:addTaggedRepoFormOpen,onOpenChange:setAddTaggedRepoFormOpen},highlight_input_form_jsx(dialog.cZ,{style:{width:"33vw"}},highlight_input_form_jsx(dialog.fK,null,highlight_input_form_jsx(dialog.$N,null,"Add a repo"),highlight_input_form_jsx(dialog.Be,null,"Add a Repository to tag with this highlight.")),highlight_input_form_jsx(search.Z,{isLoading:tagRepoSearchLoading,placeholder:"Repository Full Name (ex: open-sauced/open-sauced)",className:"!w-full text-md text-gra",name:"query",suggestions:repoTagSuggestions,onChange:function onChange(value){return setTaggedRepoSearchTerm(value)},onSearch:function onSearch(search){return setTaggedRepoSearchTerm(search)}}),highlight_input_form_jsx(dialog.iK,{onClick:function onClick(){return setAddTaggedRepoFormOpen(!1)}}),highlight_input_form_jsx("div",{className:"flex justify-end gap-2"},highlight_input_form_jsx(Button_button.Z,{variant:"default",onClick:function onClick(){return setAddTaggedRepoFormOpen(!1)}},"Cancel"),highlight_input_form_jsx(Button_button.Z,{variant:"primary",onClick:function onClick(){setAddTaggedRepoFormOpen(!1),handleTaggedRepoAdd(taggedRepoSearchTerm)},disabled:!taggedRepoSearchTerm},"Add")))),isFormOpenMobile&&highlight_input_form_jsx("div",{className:"fixed left-0 right-0 z-30 h-screen py-4 transition bg-white top-24 md:hidden"},highlight_input_form_jsx("div",{className:"flex items-center justify-between w-full px-2"},highlight_input_form_jsx("button",{onClick:function onClick(){return setIsFormOpenMobile(!1)},type:"button"},highlight_input_form_jsx(io5_index_esm.bjh,{className:"text-2xl text-light-slate-10"})),highlight_input_form_jsx(Button_button.Z,{loading:loading,disabled:!bodyText||!validCharLimit(),className:"py-0.5 ",variant:"primary"},"Post")),highlight_input_form_jsx("div",{className:"flex flex-col gap-2 p-2 overflow-hidden text-sm bg-white "},highlight_input_form_jsx("div",{className:"flex pr-2"},highlight_input_form_jsx("input",{value:title,maxLength:50,onChange:function onChange(e){return setTitle(e.target.value)},className:"flex-1 focus:outline-none",type:"text",placeholder:"Add title (optional)",id:"highlight-create-input"})),highlight_input_form_jsx(TypeWriterTextArea,{className:"resize-y min-h-[80px] max-h-99 font-normal text-light-slate-11 mb-2 transition focus:outline-none rounded-lg ",defaultRow:4,value:bodyText,placeholder:" Tell us about your highlight and add a link\n            ",typewrite:isTyping,textContent:bodyText,onChangeText:function onChangeText(value){handleTextAreaInputChange(value),setCharCount(value.length)},ref:textAreaRef}),highlight_input_form_jsx("div",{className:"flex items-center justify-between w-full"},date&&highlight_input_form_jsx("span",{className:"text-xs text-light-slate-9"},(0,format.Z)(date,"PPP")),highlight_input_form_jsx("p",{className:"flex justify-end gap-1 pb-2 ml-auto text-xs text-light-slate-9"},highlight_input_form_jsx("span",{className:"".concat(!validCharLimit()&&"text-red-600")},validCharLimit()?charCount:"-".concat(charCount-500)),"/ ",highlight_input_form_jsx("span",null,500))),highlight_input_form_jsx("div",{className:"flex"},highlight_input_form_jsx("div",{className:"flex w-full gap-1"},highlight_input_form_jsx(tooltip.Z,{direction:"top",content:"Pick a date"},highlight_input_form_jsx(popover.J2,null,highlight_input_form_jsx(popover.xo,{asChild:!0},highlight_input_form_jsx("button",{className:"flex items-center gap-2 p-2 text-base rounded-full text-light-slate-9 bg-light-slate-3"},highlight_input_form_jsx(index_esm.vlc,{className:"text-light-slate-11"}))),highlight_input_form_jsx(popover.yk,{className:"w-auto p-0 bg-white"},highlight_input_form_jsx(calendar.f,{toDate:new Date,mode:"single",selected:date,onSelect:setDate,className:"border rounded-md"})))),highlight_input_form_jsx(tooltip.Z,{className:"text-xs",direction:"top",content:"Auto-Summarize"},highlight_input_form_jsx("button",{disabled:isSummaryButtonDisabled,type:"button",onClick:handleGenerateHighlightSummary,className:"p-2 rounded-full bg-light-slate-3 text-light-slate-11 disabled:cursor-not-allowed disabled:animate-pulse disabled:text-light-orange-9"},highlight_input_form_jsx(hi_index_esm.Moc,{className:"text-base"}))),highlight_input_form_jsx(text_input.Z,{className:"text-xs",value:highlightLink,handleChange:function handleChange(value){return setHighlightLink(value)},placeholder:"Paste your PR URL and get it auto-summarized!"}))))),highlight_input_form_jsx(fab.Z,{className:"md:hidden"},highlight_input_form_jsx("div",{onClick:function onClick(){return setIsFormOpenMobile(!0)},className:"p-3 mb-10 -mr-4 text-white rounded-full shadow-lg bg-light-orange-10",id:"mobile-highlight-create-button"},highlight_input_form_jsx(rx_index_esm.D1o,{className:"text-3xl"}))))};HighlightInputForm.displayName="HighlightInputForm",HighlightInputForm.__docgenInfo={description:"",methods:[],displayName:"HighlightInputForm",props:{refreshCallback:{required:!1,tsType:{name:"Function"},description:""}}};var highlight_input_form=HighlightInputForm;try{highlightinputform.displayName="highlightinputform",highlightinputform.__docgenInfo={description:"",displayName:"highlightinputform",props:{refreshCallback:{defaultValue:null,description:"",name:"refreshCallback",required:!1,type:{name:"Function"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["components/molecules/HighlightInput/highlight-input-form.tsx#highlightinputform"]={docgenInfo:highlightinputform.__docgenInfo,name:"highlightinputform",path:"components/molecules/HighlightInput/highlight-input-form.tsx#highlightinputform"})}catch(__react_docgen_typescript_loader_error){}}}]);